---
import type { GetStaticPathsOptions, Page } from 'astro'
import type { CollectionEntry } from 'astro:content'
import { loadAndFormatCollection } from '@lib/astro'
import LayoutArchive from '@components/layouts/Archive.astro'

type Props = {
  page: Page<CollectionEntry<'photos'>>
}

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const photos = await loadAndFormatCollection('photos')
  return paginate(photos, { pageSize: 30 })
}

// All paginated data is passed on the "page" prop
const { page } = Astro.props
---

<LayoutArchive
  title="Photos"
  pageTitle={`Photos | Page ${page.currentPage} of ${page.lastPage} `}
  page={page}
/>
