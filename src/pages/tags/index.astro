---
import { getAllTags } from '@lib/astro'
import Tag from '@components/core/Tag.astro'

const allTags = await getAllTags()
---

<style>
  .tags {
    list-style: none;
    padding: 0;
    text-align: center;
  }

  .tags li {
    display: inline-block;
    margin-top: calc(var(--spacer) / 4);
    margin-bottom: calc(var(--spacer) / 4);
  }

  .tags li::before {
    display: none;
  }
</style>

<ul class="tags">
  {
    Array.from(data.allMarkdownRemark.group)
      .sort((a, b) => b.totalCount - a.totalCount)
      .map((tag) => (
        <li>
          <Tag
            name={tag.fieldValue || ''}
            url={`/archive/${tag.fieldValue}/`}
            count={tag.totalCount}
            style={{ fontSize: `${100 + tag.totalCount * 2}%` }}
          />
        </li>
      ))
  }
</ul>
