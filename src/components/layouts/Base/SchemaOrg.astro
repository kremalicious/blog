---
import config from '@config/blog.config.ts'

export type Props = {
  title: string
  url: string
  image: string
  description: string
  datePublished?: string
  dateModified?: string
}

const { title, url, image, description, datePublished, dateModified } =
  Astro.props
const { siteUrl, siteTitle, author } = config

const schema = [
  {
    '@context': 'http://schema.org',
    '@type': 'Blog',
    url: siteUrl,
    name: siteTitle
  },
  ...[
    datePublished && {
      '@context': 'http://schema.org',
      '@type': 'BlogPosting',
      author: {
        '@type': 'Person',
        name: author.name
      },
      publisher: {
        '@type': 'Organization',
        name: author.name
      },
      url: url,
      name: title,
      headline: title,
      image: {
        '@type': 'ImageObject',
        url: image
      },
      description: description,
      datePublished: datePublished,
      dateModified: dateModified || datePublished,
      mainEntityOfPage: {
        '@type': 'Blog',
        '@id': siteUrl
      }
    }
  ]
]
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
